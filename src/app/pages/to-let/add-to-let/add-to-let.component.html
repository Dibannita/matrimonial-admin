<form
  #formElement="ngForm"
  [formGroup]="dataForm"
  (ngSubmit)="onSubmit()"
  autocomplete="off"
>
  <div class="top-input">
    <div class="title">
      <h2>{{ id ? "Edit" : "Add New" }} To-let</h2>
    </div>
    <div class="action-btn">
      <button mat-stroked-button color="warn" type="button">Discard</button>

      <button mat-raised-button color="primary" type="submit">
        {{ id ? "Update" : "Save"
        }}{{
        dataForm.value.status
          ? " (" + (dataForm.value.status | titlecase) + ")"
          : ""
        }}
      </button>
    </div>
  </div>
  <!-- END Input Form Header -->

  <div class="page-slug">
    <div class="checkbox">
      <mat-checkbox
        [(ngModel)]="autoSlug"
        (change)="autoGenerateSlug()"
        [ngModelOptions]="{ standalone: true }"
        color="primary"
      >Auto Slug</mat-checkbox
      >
    </div>
  </div>

  <div class="container-fluid">
    <div class="main">
      <mat-card class="content-main content-1">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>To-let Title</mat-label>
          <input
            formControlName="name"
            matInput
            placeholder="Enter To-let Title"
            required
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Slug</mat-label>
          <input formControlName="slug" matInput required autoSlug />
          <mat-error>This field is required.</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Bedroom</mat-label>
          <input
            formControlName="bedroom"
            matInput
            placeholder="Enter Bedroom"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>



        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Bathroom</mat-label>
          <input
            formControlName="bathroom"
            matInput
            placeholder="Enter Bathroom"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>



        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Balcony</mat-label>
          <input
            formControlName="balcony"
            matInput

            placeholder="Enter Balcony"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Floor No</mat-label>
          <input
            formControlName="floorNo"
            matInput

            placeholder="Enter Floor No"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Available From</mat-label>
          <input
            formControlName="availableFrom"
            matInput
            placeholder="Enter Available From"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Flat Category</mat-label>
          <input
            formControlName="flatCategory"
            matInput
            placeholder="Enter Flat Category"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>



        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Property Type</mat-label>
          <input
            formControlName="flatType"
            matInput
            placeholder="Enter Property Type (Flat)"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Flat Rent </mat-label>
          <input
            formControlName="rentPrice"
            matInput
            placeholder="Enter Flat Rent"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>



        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Division</mat-label>
          <mat-select formControlName="division" (selectionChange)="onChangeRegion($event)">
            <mat-option *ngFor="let item of divisions" [value]="item?._id">{{item.name}}
            </mat-option>
          </mat-select>
          <mat-error>This field is required</mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Area</mat-label>
          <mat-select formControlName="area" (selectionChange)="onChangeArea($event)">
            <mat-option *ngFor="let item of area" [value]="item?._id">{{item.name}}
            </mat-option>
          </mat-select>
          <mat-error>This field is required</mat-error>
        </mat-form-field>



        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Zone</mat-label>
          <mat-select formControlName="zone" >
            <mat-option *ngFor="let item of zone" [value]="item?._id">{{item.name}}
            </mat-option>
          </mat-select>
          <mat-error>This field is required</mat-error>
        </mat-form-field>



        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Address</mat-label>
          <input
            formControlName="address"
            matInput
            required
            placeholder="Enter Address"
          />
          <mat-error>This field is required</mat-error>
        </mat-form-field>




      </mat-card>
      <!-- END CONTENT PART 1 -->

      <mat-card class="content-main content-2">
        <div class="title">
          <h4>Media</h4>
        </div>

        <div class="content-main content-2">
          <div
            class="image-container"
            [ngClass]="{ 'border-dashed': !chooseImage.length }"
          >
            <div class="picker" *ngIf="!chooseImage.length">
              <div class="action">
                <div class="icon">
                  <span class="material-icons">cloud_upload</span>
                </div>
                <button
                  type="button"
                  mat-stroked-button
                  color="accent"
                  (click)="openGalleryDialog()"
                >
                  Pick Images
                </button>
                <p>Maximum 10 Image you can upload</p>
              </div>
            </div>
            <!-- END Picker Area -->

            <div
              *ngIf="chooseImage && chooseImage.length"
              class="img-preview-container"
              cdkDropList
              cdkDropListOrientation="horizontal"
              (cdkDropListDropped)="drop($event)"
            >
              <div class="preview" *ngFor="let data of chooseImage" cdkDrag>
                <img [src]="data" [alt]="data" />
                <div class="overlay-ac">
                  <button
                    type="button"
                    mat-icon-button
                    color="warn"
                    (click)="removeSelectImage(data)"
                  >
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </div>
              <div class="add-more" *ngIf="chooseImage.length < 10">
                <div class="icon">
                  <span class="material-icons">cloud_upload</span>
                </div>
                <button
                  type="button"
                  mat-stroked-button
                  color="accent"
                  (click)="openGalleryDialog()"
                >
                  Pick Images
                </button>
              </div>
            </div>
          </div>
        </div>
      </mat-card>
      <!-- END CONTENT PART 2 -->


      <mat-card class="content-main content-1">
        <div class="">
          <h4>Job Description</h4>

          <quill-editor
            #editor
            [modules]="modules"
            [sanitize]="true"
            classes="additional"
            formControlName="description"
          ></quill-editor>
        </div>


      </mat-card>



      <!--      <mat-card class="content-main content-5">-->
      <!--        <div class="title">-->
      <!--          <h4>SEO</h4>-->
      <!--        </div>-->

      <!--        <div class="input-area" fxLayout="row wrap">-->
      <!--          <mat-form-field appearance="outline" class="w-100 px-1">-->
      <!--            <mat-label>Title</mat-label>-->
      <!--            <input-->
      <!--              formControlName="seoTitle"-->
      <!--              matInput-->
      <!--              placeholder="Enter seo title"-->
      <!--            />-->
      <!--            <mat-error>This field is required</mat-error>-->
      <!--          </mat-form-field>-->

      <!--          <mat-form-field appearance="outline" class="w-100 px-1">-->
      <!--            <mat-label>Keywords</mat-label>-->
      <!--            <input-->
      <!--              formControlName="seoKeywords"-->
      <!--              matInput-->
      <!--              placeholder="Enter seo keywords with comma"-->
      <!--            />-->
      <!--            <mat-error>This field is required</mat-error>-->
      <!--          </mat-form-field>-->

      <!--          <mat-form-field appearance="outline" class="w-100">-->
      <!--            <mat-label>Description</mat-label>-->
      <!--            <textarea-->
      <!--              formControlName="seoDescription"-->
      <!--              matInput-->
      <!--              placeholder="Enter seo description"-->
      <!--              [rows]="6"-->
      <!--            ></textarea>-->
      <!--          </mat-form-field>-->
      <!--        </div>-->
      <!--      </mat-card>-->
      <!-- END CONTENT PART 3 -->
    </div>
    <!-- END! MAIN AREA -->

    <div class="sidebar">
      <mat-card class="content-sidebar content-sidebar-0">
        <div class="title">
          <h4>Status</h4>
        </div>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Select Status</mat-label>
          <mat-select formControlName="status" required>
            <mat-option *ngFor="let data of productStatus" [value]="data.value">
              {{ data.viewValue }}
            </mat-option>
          </mat-select>
          <mat-error>This field is required.</mat-error>
        </mat-form-field>
      </mat-card>
      <!-- END CONTENT SIDEBAR 2 -->

    </div>
    <!-- END! SIDE AREA -->
  </div>
</form>

<!-- LOADING TEMPLATE -->
<ngx-spinner
  bdColor="rgba(0, 0, 0, 0.5)"
  size="medium"
  color="#fff"
  type="ball-atom"
  [fullScreen]="true"
>
  <p style="color: white">Loading...</p>
</ngx-spinner>
